<Calculator>:
    BoxLayout:
        orientation: 'vertical'
        TopMenu:
        Abacus:
        BoxLayout:
            orientation: 'horizontal'
            Ledger:
            OperationsBar:
            CuneiformDrawingInput:
                TopRightButton:

<TopMenu>:
    size_hint_y: None
    height: 32
    canvas:
        Color:
            rgb: 1, 0, 0
        Rectangle:
            size: self.size
            pos: self.pos

<Abacus>:
    canvas.before:
        Color:
            rgb: 0.4, 0.4, 0.4, 1
        Rectangle:
            source: 'assets/graphics/wood.png'
            size: self.size
            pos: self.pos

<Ledger>:
    #:set BORDER_W 6

    size_hint_x: 1.6
    canvas:
        Color:
            rgba: 1, 1, 1, 1
        Rectangle:
            pos: self.pos
            size: self.size
            source: 'assets/graphics/sandstone.jpg'  # TODO: make this platform independent?
        Color:
            rgba: 0, 0, 0, 0.1
        Rectangle:
            pos: self.pos
            size: (self.width, BORDER_W)
        Color:
            rgba: 1, 1, 1, 0.3
        Rectangle:
            pos: (self.x, self.y + self.height - BORDER_W)
            size: (self.width, BORDER_W)
        Color:
            rgba: 0.5, 0.5, 0.5, 0.3
        Rectangle:
            pos: (self.x, self.y + BORDER_W)
            size: (BORDER_W, self.height - 2 * BORDER_W)
        Rectangle:
            pos: (self.x + self.width - BORDER_W, self.y + BORDER_W)
            size: (BORDER_W, self.height - 2 * BORDER_W)

<OperationsBar>:
    size_hint_x: None
    width: 48
    BoxLayout:
        orientation: 'vertical'
        pos: self.parent.pos
        size: self.parent.size
        Button:
            pos_hint: {'x': 0, 'top': 1}
            Image:
                pos: self.parent.pos
                size: self.parent.size
                allow_stretch: True
                source: self.parent.parent.parent.buttonImage('plus')
        Button:
            pos_hint:  {'x': 0, 'top':4/5}
            Image:
                pos: self.parent.pos
                size: self.parent.size
                allow_stretch: True
                source: self.parent.parent.parent.buttonImage('minus')
        Button:
            pos_hint: {'x': 0, 'top': 3/5}
            Image:
                pos: self.parent.pos
                size: self.parent.size
                allow_stretch: True
                source: self.parent.parent.parent.buttonImage('times')
        Button:
            pos_hint: {'x': 0, 'top': 2/5}
            Image:
                pos: self.parent.pos
                size: self.parent.size
                allow_stretch: True
                source: self.parent.parent.parent.buttonImage('divide')
        Button:
            pos_hint: {'x': 0, 'top': 1/5}
            Image:
                pos: self.parent.pos
                size: self.parent.size
                allow_stretch: True
                source: self.parent.parent.parent.buttonImage('sqrt')


<CuneiformDrawingInput>:
    canvas.before:
        Color:
            rgb: 1, 1, 1, 1
        Rectangle:
            source: 'assets/graphics/sandbox.jpg'
            size: self.size
            pos: self.pos

<TopRightButton>:
    size_hint: 50, 50
    #:set offset 10
    Button:
        size: self.parent.size_hint
        background_color: .5, .5, .5, 1 
        x: self.parent.parent.x + self.parent.parent.size[0] - self.size[0] - offset
        y: self.parent.parent.y + self.parent.parent.size[1] - self.size[1] - offset
        on_press:
            self.background_color = 0, 0, 0.055
            self.parent.parent.click()
        on_release:
            self.background_color = .5, .5, .5, 1 
        canvas.before:
            Color:
                rgba: self.background_color
            Line:
                width: 2
                rectangle: self.x, self.y, self.width, self.height
        Image:
            source: self.parent.parent.parent.buttonImage()
            center_x: self.parent.center_x
            center_y: self.parent.center_y
            allow_stretch: True
            size: self.parent.size
