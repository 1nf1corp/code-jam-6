#:kivy 1.11.1
# Uncomment out this to have a border drawn around everything

#:import random random.random
#<Widget>:
#    canvas.after:
#        Color:
#            rgba: random(), random(), random(), 1
#        Line:
#            rectangle: [self.x, self.y, self.width, self.height]



# Add this to MainWidget for the background

################## LAYOUT ##################
<MainWidget>:
#    canvas.before:
#        Rectangle:
#            pos: self.pos
#            size: self.size
#            source: '../assets/cave_background.jpg'
    id: main_layout
    orientation: 'vertical'
    cols: 2
    StatusBar:
        size_hint_x: 0.3
    CardWidget
        size_hint_x: 0.7




################## STATUS ##################
<StatusBar>:
    rows: 4
    padding: (40, 150)
    spacing: 10
    StatusWidget:
        Label:
            text: data.game_state.main_state_1.label
        Label:
            text: data.game_state.main_state_1.value
    StatusWidget:
        Label:
            text: data.game_state.main_state_2.label
        Label:
            text: data.game_state.main_state_2.value
    StatusWidget:
        Label:
            text: data.game_state.main_state_2.label
        Label:
            text: data.game_state.main_state_2.value
    StatusWidget:
        Label:
            text: data.game_state.main_state_2.label
        Label:
            text: data.game_state.main_state_2.value


<StatusWidget>:
    orientation: 'vertical'
    canvas.before:
        Rectangle:
            pos:self.pos
            size:self.size
            source: data.assets_loc+ 'temp-pebble.png'


##################  CARD  ##################
<CardWidget>:
    # SwipeCard:
    #     size_hint: None,None
    #     do_rotation: False
    #     do_scale: False
    #     do_translation: False
    #     rotation: 0
    #     scale: 2

    BoxLayout:
        # size_hint: None,None
        orientation: 'vertical'
        padding: (5, 5)
        CardBoxLayout:
            id: card
            BoxLayout:
                size_hint_y: .2
                Widget:
                    size_hint_x: .2
                Label:
                    font_size: 33
                    text_size: self.size
                    center: root.center
                    text: "[b]" + data.active_card.text+ "[/b]"
                    halign: 'center'
                    markup: True
                Widget:
                    size_hint_x: .2

            BoxLayout:
                BoxLayout:
                    canvas.before:
                        Rectangle:
                            pos: (self.pos[0]+(self.padding[0] ), self.pos[1]+(self.padding[1] ))
                            size: (self.size[0]-(self.padding[0] + self.padding[2]), self.size[1]-(self.padding[1] + self.padding[3]))
                            source: data.assets_loc  + 'stone_tablet.png'
                    #         L    T    R     B
                    padding: (100, 20, 100, 10)
                    BoxLayout:
                        padding: (30, 90, 30, 110)
                        Image:
                            source: data.assets_loc +data.active_card.card_asset

        BoxLayout:
            size_hint:(1, .3)
            id: choices
            orientation: 'horizontal'
            Button:
                text: data.active_card.options[0].text
                font_size: 26
                center: root.center
                valign: 'center'
                halign: 'center'
                text_size: self.size
                on_press: data.choice_handler('1')
            Button:
                text: data.active_card.options[1].text if len(data.active_card.options) > 1 else data.active_card.options[0].text
                font_size: 26
                center: root.center
                valign: 'center'
                halign: 'center'
                text_size: self.size
                on_press: data.choice_handler('1')



<CardBoxLayout>:
    id: card
    orientation: 'vertical'
